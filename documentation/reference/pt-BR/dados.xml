<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<chapter id="behave-dados">

	<title>Conjunto de Dados</title>
	<section>
		<title>Conceito</title>
		<para>
			Este capítulo apresenta a funcionalidade de conjunto de dados
			(Dataset), que ajudam na criação de histórias que possuam uma grande
			quantidade de dados.
		</para>
	</section>
	<section>
		<title>Criação da História</title>
		<para>
			Para utilizar...
			História (.story):
		</para>
		<programlisting>Cenário: adiciono a obra "{obra}"

Dado que estou na tela "Tela Principal"
Então vou para a tela "Lista de Obras"
Quando clico em "Adicionar Obra"
Então será exibido "Cadastro"
<citetitle>Quando seleciono "{obra}" do conjunto de dados "obras"</citetitle>
Quando informo o valor do campo "Nome Obra"
Quando informo o valor do campo "Valor"
Quando informo o valor do campo "Prazo"
Quando clico em "Inserir"</programlisting>
		<para>
			Para utilizar...
			História (obra.story):
		</para>
		<programlisting>Cenário: Adição de obras armazenadas no dataset

Dado que acessei o sistema
<citetitle>Quando adiciono a obra "Vila olímpica"</citetitle>
Então será exibido "Nome Obra"</programlisting>
	</section>
	<section>
		<title>Criação do XML de Dados</title>
		<para>
			Para utilizar...
			XML (obras.xml):
		</para>
		<programlisting><![CDATA[<DataSet>
	<dataRecords>
		<DataRecord id="Parque olímpico">
			<dataItems>
				<DataItem key="Nome Obra" value="Parque Olímpico" />
				<DataItem key="Valor" value="250000000" />
				<DataItem key="Prazo" value="01/05/2015" />
			</dataItems>
		</DataRecord>
		<DataRecord id="Vila olímpica">
			<dataItems>
				<DataItem key="Nome Obra" value="Vila Olímpica e Paraolímpica" />
				<DataItem key="Valor" value="150000000" />
				<DataItem key="Prazo" value="01/07/2015" />
			</dataItems>
		</DataRecord>
	</dataRecords>
</DataSet>]]></programlisting>
	</section>
	<section>
		<title>Configuração do Data Provider</title>
		<para>
			Para utilizar...
			Arquivo de Inicialização JAva (ObrasTest.java):
		</para>
		<programlisting>public class ObrasTest {
	private BehaveContext eng = BehaveContext.getInstance();
	private static DatasetProvider datasetProvider = (DatasetProvider) InjectionManager.getInstance().getInstanceDependecy(DatasetProvider.class);

	public ObrasTest() {
		datasetProvider.load("obras","/datasets/obras.xml");
	}

	@Test
	public void testAllObras() throws Throwable {
		eng.addStories("/stories/obra.story");
		eng.run();
	}
}</programlisting>
	</section>	
</chapter>
